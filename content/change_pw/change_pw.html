<!DOCTYPE html>
<html lang="en">

<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<title>Gathable</title>
<link rel="icon" href="icon.svg">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/home/"><i class="bi bi-calendar-range"></i> Gathable</a>
        <div class="navbar-nav dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Menu</a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark position-absolute" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="/home/">Home</a></li>
              <li><a class="dropdown-item" href="/profile/">Profile</a></li>
              <li><a class="dropdown-item" href="/timetable/">My Timetable</a></li>
              <li><a class="dropdown-item" href="/groups/">My Groups</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#" onclick="logout();return false;">Log out</a></li>
              <script>
                function logout() {
                  document.cookie = "username=" + "XXX" + "; expires=Sat, 01 Jan 1970 00:00:00 UTC; path=/"
                  document.cookie = "pwhash=" + "XXX" + "; expires=Sat, 01 Jan 1970 00:00:00 UTC; path=/"
                  window.location.href = "/"
                }
              </script>
            </ul>
        </div>
    </div>     
</nav>
<div class="container p-3">	  
    <h3><i class="bi bi-lock-fill"></i>  Change Password</h3>
    <hr>
</div>    
<div class="container p-3 w-75">
  <form onsubmit="return false">
    <label for="opassword" class="mb-3">Old password: </label>
    <div class="input-group mb-3">
        <input type="password" id="opassword" class="form-control" placeholder="Old password" required>
        <button class="btn btn-outline-secondary" type="button" id="pwbtn" onmousedown="showPW('opassword', 'pwbtn')" onmouseup="hidePW('opassword', 'pwbtn')"><i class="bi bi-eye-slash-fill"></i></button>
      </div>
    <label for="npassword" class="mb-3">New password: </label>
    <div class="input-group mb-3">
        <input type="password" id="npassword" class="form-control" placeholder="New password" required>
        <button class="btn btn-outline-secondary" type="button" id="npwbtn" onmousedown="showPW('npassword', 'npwbtn')" onmouseup="hidePW('npassword', 'npwbtn')"><i class="bi bi-eye-slash-fill"></i></button>
      </div>
      <label for="cpassword" class="mb-3">Confirm new password: </label>
      <div class="input-group mb-3">
        <input type="password" id="cpassword" class="form-control" placeholder="Confirm new password" required>
        <button class="btn btn-outline-secondary" type="button" id="cpwbtn"  onmousedown="showPW('cpassword', 'cpwbtn')" onmouseup="hidePW('cpassword', 'cpwbtn')"><i class="bi bi-eye-slash-fill"></i></button>
    </div>
    <button id="change" type="submit" class="btn btn-primary" style="float: right;">Change</button>
  </form>
  <a href="/profile/"><button type="button" class="btn btn-secondary">Back</button></a>

</body>
<script>
    function showPW(inptId, btnId) {
      document.getElementById(inptId).type = 'text';
      document.getElementById(btnId).innerHTML = '<i class="bi bi-eye-fill"></i>';
    }
    function hidePW(inptId, btnId) {
      document.getElementById(inptId).type = 'password';
      document.getElementById(btnId).innerHTML = '<i class="bi bi-eye-slash-fill"></i>';
    }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/2.0.2/sha.js"></script> <!--jsSHA-->
<script src='/function/account.js'></script>
<script src='change_pw.js'></script>
</html>
